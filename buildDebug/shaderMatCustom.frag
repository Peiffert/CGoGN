std::string ShaderMatCustom::fragmentShaderText =
"\n"
"PRECISON;\n"
"VARYING_FRAG vec3 EyeVector, Normal, LightDir;\n"
"#ifdef WITH_COLOR\n"
"VARYING_FRAG vec3 Color;\n"
"#endif\n"
"uniform vec4 materialDiffuse;\n"
"uniform vec4 materialSpecular;\n"
"uniform vec4 materialAmbient;\n"
"uniform float shininess;\n"
"FRAG_OUT_DEF;\n"
"void main()\n"
"{	\n"
"	vec3 N = normalize (Normal);	\n"
"	vec3 L = normalize (LightDir);\n"
"	//float lambertTerm = dot(N,L);\n"
"	float lambertTerm = 0.15*dot(N,L)+0.80;\n"
"	\n"
"	vec4 finalColor = materialAmbient;\n"
"	\n"
"	#ifdef DOUBLE_SIDED\n"
"	if (lambertTerm < 0.0)\n"
"	{\n"
"		N = -1.0*N;\n"
"		lambertTerm = -1.0*lambertTerm;\n"
"	#else\n"
"	if (lambertTerm > 0.0)\n"
"	{\n"
"	#endif\n"
"		#ifndef WITH_COLOR\n"
"		finalColor += materialDiffuse * lambertTerm;\n"
"		#else\n"
"		finalColor += vec4((Color*lambertTerm),0.0) ;\n"
"		#endif\n"
"		vec3 E = normalize(EyeVector);\n"
"		vec3 R = reflect(-L, N);\n"
"		float specular = pow( max(dot(R, E), 0.0), shininess );\n"
"		finalColor += materialSpecular * specular;\n"
"	}\n"
"	gl_FragColor=finalColor;\n"
"	//gl_FragColor = vec4(lambertTerm,lambertTerm,lambertTerm,0);\n"
"}\n";

